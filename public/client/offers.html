<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Firmbee.com - Free Project Management Platform for remote teams"> 
    <title>Name of company</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/0e035b9984.js" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/0e035b9984.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
      <nav class="navbar navbar-expand-xl fixed-top">
        <div class="container">
          <a class="navbar-brand" href="index.html"><img style="height: 70px; width: 130px;" claass="w-100" src="../images/logo.png"></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-card-item">
                <a class="nav-link  " href="index.html">Home</a>
              </li>
              <li class="nav-card-item">
                <a class="nav-link active" href="offers.html">Offers</a>
              </li> 
              <li class="nav-card-item">
                <a class="nav-link" href="blog.html">Blog</a>
              </li>     
              <li class="nav-card-item">
                <a class="nav-link" href="aboutus.html">About</a>
              </li> 
              <li class="nav-card-item">
                <a class="nav-link" href="contact.html">Contact</a>
              </li>
            </ul>
            <ul class="right navbar-nav ms-auto">
              <li class="nav-card-item-right create-account">
                <a class="nav-link" href="register.html">Create account</a>
              </li> 
            </ul>
          </div>
        </div>
      </nav>

         <br><br><br><br>
        <!-- Jobs Start -->
        <div class="container-xxl py-5">
            <div class="container">
                <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">Job Listing</h1>
                <div class="tab-class text-center wow fadeInUp" data-wow-delay="0.3s">
                  <!-- Jobs Start -->
       
            
              <div class="tab-class text-center wow fadeInUp" data-wow-delay="0.3s">
                  <ul class="nav nav-pills d-inline-flex justify-content-center border-bottom mb-5">
                     
                          <form id="searchForm" class="search-form">
                              <input type="text" name="searchTerm" id="searchTermInput"  placeholder="Search...">
                              <select name="searchLocation" id="locationSelectInput" >
                                <option value="all">All</option>
                                <option value="Tunis">Tunis</option>
                                <option value="Sousse">Sousse</option>
                                <option value="Sfax">Sfax</option>
                                <option value="Monastir">Monastir</option>
                              </select>
                              <button type="submit">Search</button>
                          </form>
                            
                      
                  </ul>
                  </div>
                  <ul id="resultList"></ul>
                    <div id="jobsContainer" class="tab-content">
                        <div id="tab-1" class="tab-pane fade show p-0 active">
                            <div class="job-item p-4 mb-4">
                               
                            </div>
                            
                        
                            <!-- <a class="btn btn-primary py-3 px-5" href="">Browse More Jobs</a> -->
                        </div>
                    
                    </div>
                </div>
            </div>
        </div>
        <!-- Jobs End -->


         <!-- Footer -->
         <footer>
          <div class="container text-center text-md-start">
            <div class="footer-wrap">
              <div class="about">
                <img class="mb-5" src="img/icon/company-logo.svg" alt="">
               
                <div class="social-media">
                  <a href="" class="me-2 text-reset"><img src="img/icon/facebook-icon.svg" alt=""></a>
                  <a href="" class="me-2 text-reset"><img src="img/icon/twitter-icon.svg" alt=""></a>
                  <a href="" class="me-2 text-reset"><img src="img/icon/linkedin-icon.svg" alt=""></a>
                  <a href="" class="me-2 text-reset"><img src="img/icon/instagram-icon.svg" alt=""></a>
                </div>
              </div>

              <div class="company">
                <h6 class="fw-bold">Company</h6>
                <p><a href="aboutus.html">About us</a></p>
                <p><a href="offers.html">Offers</a></p>
                <p><a href="contact.html">Contact</a></p>
      
              </div>
              
              <div class="useful-links">
                <h6 class="fw-bold">Useful links</h6>
                <p><a href="blog.html">Blog</a></p>
                <p><a href="sign-in.html">Login</a></p>
                <p><a href="policies.htlml">Privacy Policy</a></p>

              </div>

              <div class="newsletter">
                <h6 class="fw-bold">Newsletter</h6>
                <p class="text-muted">Sign up and receive the latest tips
                  via email.</p>
                  <form id="subscribe" action="">
                    <label for="email">Youre e-mail:</label>
                    <input type="email" placeholder="e-mail:" name="email" required>
                    <button type="submit" class="main-btn">Subscribe</button>
                  </form>
              </div>
              
            </div>
          </div>
        
      </footer>

  <script src="js/nav-bg.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script>
        var request = new XMLHttpRequest();
        request.open("GET", "http://127.0.0.1:3000/jobs", true);
        request.onload = function () {
          var data = JSON.parse(this.response);
          var articleContainer = document.getElementById("jobsContainer");
      console.log(data)
          data.forEach((job) => {
            
              var jobItem = document.createElement("div");
              jobItem.className = "job-item";
            jobItem.className ="mb-4"
              jobItem.innerHTML = `
              <div class="row g-4">
                 <div class="col-sm-12 col-md-8 d-flex align-items-center">
                    <img class="flex-shrink-0 img-fluid border rounded" src="../images/${job.image.split('/').pop().split('\\').pop()}" alt="" style="width: 80px; height: 80px;">
                    <div class="text-start ps-4">
                    <h5 class="mb-3">${job.title}</h5>
                    <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>${job.locationAddress}</span>
                    <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>${job.startTime} - ${job.endTime}</span>
                    <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>${job.salary}</span>
                    </div>
                </div>
                <div class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                    <div class="d-flex mb-3">
                        <a class="btn btn-light btn-square me-3" href=""><i class="far fa-heart text-primary"></i></a>
                        <a class="btn btn-primary" href="./jobdetails.html?id=${job._id}">Apply Now</a>
                    </div>
                    <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Date Line: 01 Jan, 2045</small>
                </div>
            </div>
              `;
      
              articleContainer.appendChild(jobItem);
            
          });
        };
        request.send();
        
      </script>
      <!-- search form-->
    <script>
      document.getElementById("searchForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission
    
        const searchTerm = document.getElementById("searchTermInput").value;
        const searchLocation = document.getElementById("locationSelectInput").value;
    
        const searchUrl = `http://localhost:5000/search/${searchTerm}/${searchLocation}`;
    
        fetch(searchUrl)
          .then(response => response.json())
          .then(data => {
            // Handle the response data here
            displayResult(data);
          })
          .catch(error => {
            // Handle any error that occurs during the request
            console.error(error);
          });
          const originalList = document.getElementById("jobsContainer");
          originalList.style.display = "none";
      }
  
    

      );
    
      function displayResult(data) {
        const resultList = document.getElementById("resultList");
        resultList.innerHTML = ""; // Clear previous results
    
        if (data.length === 0) {
          resultList.innerHTML = "<li>No results found.</li>";
          return;
        }
    
        data.forEach(model => {
          const listItem = document.createElement("li");
          listItem.innerHTML = `
          <div class="row g-4">
                 <div class="col-sm-12 col-md-8 d-flex align-items-center">
                    <img class="flex-shrink-0 img-fluid border rounded" src="../images/${model.image.split('/').pop().split('\\').pop()}" alt="" style="width: 80px; height: 80px;">
                    <div class="text-start ps-4">
                    <h5 class="mb-3">${model.title}</h5>
                    <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>${model.locationAddress}</span>
                    <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>${model.startTime} - ${model.endTime}</span>
                    <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>${model.salary}</span>
                    </div>
                </div>
                <div class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                    <div class="d-flex mb-3">
                        <a class="btn btn-light btn-square me-3" href=""><i class="far fa-heart text-primary"></i></a>
                        <a class="btn btn-primary" href="./jobdetails.html?id=${model._id}">Apply Now</a>
                    </div>
                    <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Date Line: 01 Jan, 2045</small>
                </div>
            </div>
            
          `;
          resultList.appendChild(listItem);
        });
        
      }

 
    </script>
</body>

</html>